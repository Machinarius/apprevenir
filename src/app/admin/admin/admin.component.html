<!--HOME-->
<div class="admin">
	<h1 class="admin__title app-m-top">Crear cliente</h1>
	<div class="admin__card">
		<app-loader #loader></app-loader>
		<div class="admin__box" [hidden]="loader.loadingData">
			<form [formGroup]="clientForm" (ngSubmit)="onSubmit()">
				<div class="admin__sub-title app-m-top">Información General</div>
				<mat-form-field class="width-100">
					<mat-label>Tipo de cliente</mat-label>
					<mat-select formControlName="clientType">
						<mat-option *ngFor="let clientType of newClientTypes" [value]="clientType.key">{{clientType.label}}</mat-option>
					</mat-select>
				</mat-form-field>

				<mat-form-field class="width-100">
					<mat-label>País</mat-label>
					<mat-select formControlName="country" (selectionChange)="onCountryChanged()">
						<mat-option value="{{country.id}}" *ngFor="let country of countries">{{ country.name }}</mat-option>
					</mat-select>
				</mat-form-field>

				<mat-form-field class="width-100">
					<mat-label>Departamento</mat-label>
					<mat-select formControlName="state" (selectionChange)="onStateChanged()">
						<mat-option value="{{state.id}}" *ngFor="let state of states">{{ state.name }}</mat-option>
					</mat-select>
				</mat-form-field>

				<mat-form-field class="width-100">
					<mat-label>Ciudad</mat-label>
					<mat-select formControlName="city">
						<mat-option value="{{city.id}}" *ngFor="let city of cities">{{ city.name }}</mat-option>
					</mat-select>
				</mat-form-field>

				<mat-form-field class="width-100">
					<mat-label>Nombre</mat-label>
					<input type="text" matInput formControlName="names">
				</mat-form-field>

				<mat-form-field class="width-100">
					<mat-label>Nit. o C.C.</mat-label>
					<input type="text" matInput formControlName="nationalId">
				</mat-form-field>

				<mat-form-field class="width-100">
					<mat-label>Número de Contacto</mat-label>
					<input type="text" matInput formControlName="phone">
				</mat-form-field>

				<mat-form-field class="width-100">
					<mat-label>Email</mat-label>
					<input type="email" matInput formControlName="email">
				</mat-form-field>

				<mat-form-field class="width-100">
					<mat-label>Password</mat-label>
					<input type="password" matInput formControlName="password">
				</mat-form-field>

				<mat-form-field class="width-100">
					<mat-label>Repetir contraseña</mat-label>
					<input type="password" matInput formControlName="passwordConfirmation">
				</mat-form-field>

				<div class="field-icons">
					<mat-form-field class="columns">
						<mat-label *ngIf="selectedFiles; else newFile">{{selectedFiles.item(0).name}}</mat-label>
						<ng-template #newFile>
							<mat-label>Choose file</mat-label>
						</ng-template>
						<input matInput disabled>
					</mat-form-field>
					<button mat-icon-button matSuffix (click)="fileInput.click()"  class="icon-upload">
						<mat-icon>upload</mat-icon>
					</button>
					<input hidden (change)="selectFile($event)" #fileInput type="file" id="file">
				</div>

				<div class="field-icons">
					<mat-form-field>
						<mat-label>Color principal</mat-label>
						<input matInput [ngxMatColorPicker]="picker" formControlName="brandColor">
					</mat-form-field>
					<div class="field-icons__picker">
						<ngx-mat-color-toggle matSuffix [for]="picker"></ngx-mat-color-toggle>
						<ngx-mat-color-picker #picker [touchUi]="touchUi" [color]="color"></ngx-mat-color-picker>
					</div>
				</div>
			</form>

			<div class="admin__sub-title">Información Específica</div>
			
			<div class="admin__box-text">
				<div class="admin__text">Comunas y Barrios</div>
				<button mat-mini-fab color="primary" (click)="openDialogCommunes()">
					<mat-icon>add</mat-icon>
				</button>
			</div>
			<table class="test-table" mat-table [dataSource]="dataSource" matSort matSortActive="position" matSortDisableClear matSortDirection="desc" >
				<ng-container matColumnDef="comuna">
				<th mat-header-cell *matHeaderCellDef mat-sort-header disableClear>Comuna</th>
				<td mat-cell *matCellDef="let element"> {{element.comuna}} </td>
				</ng-container>
				<ng-container matColumnDef="barrio">
				<th mat-header-cell *matHeaderCellDef mat-sort-header disableClear> Barrio</th>
				<td mat-cell *matCellDef="let element"> {{element.barrio}} </td>
				</ng-container>
				<ng-container matColumnDef="edit">
				<th mat-header-cell *matHeaderCellDef mat-sort-header disableClear>Edición</th>
				<td mat-cell *matCellDef="let element">
					<mat-icon fontSet="material-icons-outlined" class="app-cursor">edit</mat-icon>
					<mat-icon fontSet="material-icons-outlined" class="app-cursor">delete</mat-icon>
				</td>
				</ng-container>
				<tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
				<tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
			</table>
			
			<div class="admin__box-text">
				<div class="admin__text">Corregimientos y Veredas</div>
				<button mat-mini-fab color="primary" (click)="openDialogCorrection()">
					<mat-icon>add</mat-icon>
				</button>
			</div>
			<table class="test-table" mat-table [dataSource]="data_Source" matSort matSortActive="position" matSortDisableClear matSortDirection="desc" >
				<ng-container matColumnDef="corregimiento">
				<th mat-header-cell *matHeaderCellDef mat-sort-header disableClear>Corregimiento</th>
				<td mat-cell *matCellDef="let element"> {{element.corregimiento}} </td>
				</ng-container>
				<ng-container matColumnDef="vereda">
				<th mat-header-cell *matHeaderCellDef mat-sort-header disableClear> Vereda</th>
				<td mat-cell *matCellDef="let element"> {{element.vereda}} </td>
				</ng-container>
				<ng-container matColumnDef="edit">
				<th mat-header-cell *matHeaderCellDef mat-sort-header disableClear>Edición</th>
				<td mat-cell *matCellDef="let element">
					<mat-icon fontSet="material-icons-outlined" class="app-cursor">edit</mat-icon>
					<mat-icon fontSet="material-icons-outlined" class="app-cursor">delete</mat-icon>
				</td>
				</ng-container>
				<tr mat-header-row *matHeaderRowDef="displayedColumn"></tr>
				<tr mat-row *matRowDef="let row; columns: displayedColumn;"></tr>
			</table>

			<chip-input 
				description="Ingrese las sedes separadas por coma o presionando (Enter)" 
				title="Sedes"
				[form]="clientForm"
				formKey="locations"
				placeholder="Sedes">
			</chip-input>

			<chip-input 
				description="Ingrese las áreas separadas por coma o presionando (Enter)" 
				title="Área"
				[form]="clientForm"
				formKey="areas"
				placeholder="Áreas">
			</chip-input>

			<chip-input 
				description="Ingrese los turnos separados por coma o presionando (Enter)" 
				title="Turnos"
				[form]="clientForm"
				formKey="shifts"
				placeholder="Turnos">
			</chip-input>

			<chip-input 
				description="Ingrese las instituciones educativas separadas por coma o presionando (Enter)" 
				title="Instituciones educativas"
				[form]="clientForm"
				formKey="schools"
				placeholder="Instituciones educativas">
			</chip-input>

			<div class="admin__title app-m-bottom">Tests habilitados</div>
			<section class="app-flex" style="   justify-content: space-between;">
				<div>
					<div class="app-m10-bottom"><mat-checkbox color="primary" class="example-margin">Alcohol</mat-checkbox></div>
					<div class="app-m10-bottom"><mat-checkbox color="primary" class="example-margin">Ludopatía</mat-checkbox></div>
					<div class="app-m10-bottom"><mat-checkbox color="primary" class="example-margin">Sexo</mat-checkbox></div>
					<div class="app-m10-bottom"><mat-checkbox color="primary" class="example-margin">Depresión</mat-checkbox></div>
				</div>
				<div>
					<div class="app-m10-bottom"><mat-checkbox color="primary" class="example-margin">Drogas</mat-checkbox></div>
					<div class="app-m10-bottom"><mat-checkbox color="primary" class="example-margin">Redes sociales</mat-checkbox></div>
					<div class="app-m10-bottom"><mat-checkbox color="primary" class="example-margin">Trabajo</mat-checkbox></div>
					<div class="app-m10-bottom"><mat-checkbox color="primary" class="example-margin">Riesgo</mat-checkbox></div>
				</div>
				<div>
					<div class="app-m10-bottom"><mat-checkbox color="primary" class="example-margin">Tabaco</mat-checkbox></div>
					<div class="app-m10-bottom"><mat-checkbox color="primary" class="example-margin">Tecnologías</mat-checkbox></div>
					<div class="app-m10-bottom"><mat-checkbox color="primary" class="example-margin">Compras</mat-checkbox></div>
					<div class="app-m10-bottom"><mat-checkbox color="primary" class="example-margin">Etapas de Cambio</mat-checkbox></div>
				</div>
		
				<div>
					<div class="app-m10-bottom"><mat-checkbox color="primary" class="example-margin">Inhalables</mat-checkbox></div>
					<div class="app-m10-bottom"><mat-checkbox color="primary" class="example-margin">Dependencia</mat-checkbox></div>
					<div class="app-m10-bottom"><mat-checkbox color="primary" class="example-margin">Ansiedad</mat-checkbox></div>
				</div>

			</section>

			<div>
				<button class="btn btn-primary app-m-top" type="submit">Guardar</button>
			</div>
		</div>
	</div>
</div>